	@Scheduled(fixedRate = 10000)
	public void deleteOldRecords() {
		LocalDateTime thresholdTime = LocalDateTime.now().minusSeconds(20);
		onboardingInProgressCustomerRepository.deleteByInsertedAtBefore(thresholdTime);
	}
	private void throwIfCustomerIsBeingProcessed(NewPartyModel newPartyModel) {
        boolean isCustomerOnboardingInProgress = newPartyModel.getNationalities().stream()
				.anyMatch(nationality -> isIdentificationNumberFilled(nationality)
						&& onboardingInProgressCustomerRepository.countAllByIdentificationNumber(nationality.getIdentificationNumber()) > 0);
		if (isCustomerOnboardingInProgress) {
			throw new BadRequestException("Customer is already being processed");
		}
	}
