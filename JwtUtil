@Test
void testCreateAbCustomer_MissingCustomerIdOrGlobalId() throws Exception {
    // Arrange
    CustomerAbResponse customerResponse = new CustomerAbResponse();
    customerResponse.setCustomerId(null); // simulate missing ID
    customerResponse.setGlobalId("GLOBAL123");

    when(dbLogger.logIntoDb(any(), any(), any(), any())).thenReturn(logChannel);
    when(partyService.createAbTransaction(any(), any(), any(), any()))
            .thenReturn(customerResponse);

    // Act & Assert
    Exception ex = assertThrows(Exception.class,
            () -> mainService.createAbCustomer(newPartyModel, headers, "identifier"));

    assertThat(ex.getMessage()).isEqualTo("Customer ID or Global ID is null : request not processed correctly ");

    verify(dbLogger).updateLogChannelOutput(
            eq("Customer ID or Global ID is null : request not processed correctly "),
            eq(HttpStatus.BAD_REQUEST.name()),
            eq(HttpStatus.BAD_REQUEST.value()),
            eq(logChannel)
    );
}
