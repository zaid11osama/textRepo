import com.fasterxml.jackson.databind.ObjectMapper;
import lombok.Getter;
import lombok.Setter;
import org.springframework.core.io.ClassPathResource;
import org.springframework.stereotype.Component;

import java.io.IOException;
import java.util.List;
import java.util.Map;

@Getter
@Setter
@Component
public class Curl {
    private Curls curls;
    private Map<String, String> headers;

    @Getter
    @Setter
    public static class Curls {
        private List<String> get;
        private List<Request> post;
        private List<Request> put;
        private List<Request> delete;
    }

    @Getter
    @Setter
    public static class Request {
        private String url;
        private String body;
    }

    // Load JSON config from file
    public static Curl loadFromJson() {
        ObjectMapper objectMapper = new ObjectMapper();
        try {
            return objectMapper.readValue(new ClassPathResource("config.json").getFile(), Curl.class);
        } catch (IOException e) {
            throw new RuntimeException("Failed to load JSON config", e);
        }
    }
}
