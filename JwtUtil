  @Test
    void testGetFullDetails() throws Exception {
        // given
        String identifier = "CUST123";
        String identifierType = "customerid";
        String role = "admin";
        String withCustomerId = "true";
        String user = "Zaid";

        Map<String, String> headers = new HashMap<>();
        headers.put("identifierType", identifierType);
        headers.put("role", role);
        headers.put("withCustomerId", withCustomerId);
        headers.put("user", user);

        Map<String, Object> expectedResponse = Map.of("name", "John Doe", "id", identifier);

        when(mainService.getFullDetails(eq(identifier), anyMap()))
                .thenReturn(expectedResponse);

        // when + then
        mockMvc.perform(MockMvcRequestBuilders.get("/parties/{identifier}", identifier)
                        .header("identifierType", identifierType)
                        .header("role", role)
                        .header("withCustomerId", withCustomerId)
                        .header("user", user)
                        .contentType(MediaType.APPLICATION_JSON))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.name").value("John Doe"))
                .andExpect(jsonPath("$.id").value(identifier));

        verify(mainService).getFullDetails(eq(identifier), anyMap());
    }
