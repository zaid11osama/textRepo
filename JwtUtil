 @Test
    void shouldMapLegalStatusesToPartyNationalities() {
        // given
        LegalStatus legalStatus1 = new LegalStatus();
        legalStatus1.setCountry(new Translation("JO", "Jordan", "الأردن"));
        legalStatus1.setIdentificationNumber("ID123");
        
        LegalStatus legalStatus2 = new LegalStatus();
        legalStatus2.setCountry(new Translation("US", "United States", "الولايات المتحدة"));
        legalStatus2.setIdentificationNumber("ID456");

        List<LegalStatus> legalStatuses = Arrays.asList(legalStatus1, legalStatus2);

        // when
        List<PartyNationality> result = PartyService.mapToNationalities(legalStatuses);

        // then
        assertNotNull(result);
        assertEquals(2, result.size());

        assertEquals(1, result.get(0).getIndex());
        assertEquals("JO", result.get(0).get_country().getCode());
        assertEquals("ID123", result.get(0).getIdentificationNumber());

        assertEquals(2, result.get(1).getIndex());
        assertEquals("US", result.get(1).get_country().getCode());
        assertEquals("ID456", result.get(1).getIdentificationNumber());
    }

    @Test
    void shouldReturnNull_WhenLegalStatusesIsNull() {
        // when
        List<PartyNationality> result = PartyService.mapToNationalities(null);

        // then
        assertNull(result);
    }

    @Test
    void shouldSkipNullLegalStatusEntries() {
        // given
        LegalStatus legalStatus1 = new LegalStatus();
        legalStatus1.setCountry(new Translation("JO", "Jordan", "الأردن"));
        legalStatus1.setIdentificationNumber("ID123");

        List<LegalStatus> legalStatuses = Arrays.asList(null, legalStatus1, null);

        // when
        List<PartyNationality> result = PartyService.mapToNationalities(legalStatuses);

        // then
        assertNotNull(result);
        assertEquals(1, result.size());
        assertEquals(1, result.get(0).getIndex());
        assertEquals("JO", result.get(0).get_country().getCode());
        assertEquals("ID123", result.get(0).getIdentificationNumber());
    }
